var express=require("express"),app=express(),mongoose=require("mongoose"),morgan=require("morgan"),bodyParser=require("body-parser"),methodOverride=require("method-override"),jwt=require("express-jwt"),cors=require("cors"),db=require("./app/config/database.js"),env=require("./env.json");app.use(cors());var authCheck=jwt({secret:new Buffer(env.authSecret,"base64"),audience:env.authClientID});app.get("/api/public",function(e,r){r.json({message:"Hello from a public endpoint! You don't need to be authenticated to see this."})}),app.get("/api/private",authCheck,function(e,r){r.json({message:"Hello from a private endpoint! You DO need to be authenticated to see this."})}),mongoose.connect(env.MONGOLAB_URI),app.use(express["static"](__dirname+"/public")),app.use(morgan("dev")),app.use(bodyParser.urlencoded({extended:"true"})),app.use(bodyParser.json()),app.use(bodyParser.json({type:"application/vnd.api+json"})),app.use(methodOverride()),require("./app/routes.js")(app),app.listen(process.env.PORT||8050),console.log("App listening on port 8050");